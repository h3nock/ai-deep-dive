# Minimal nsjail config for judge runs.
# Adjust resource limits in the systemd service or env.

mode: ONCE
hostname: "judge"
log_level: ERROR

# Run as nobody
uidmap { inside_id: "1000" outside_id: "1000" count: 1 }
gidmap { inside_id: "1000" outside_id: "1000" count: 1 }

# Mounts: provide read-only root, writable tmp
mount {
  src: "/"
  dst: "/"
  is_bind: true
  rw: false
}

mount {
  src: "/tmp"
  dst: "/tmp"
  is_bind: true
  rw: true
}

# Disable networking
network { }

# Resource limits (override with cgroups if desired)
rlimit_as: 1073741824  # 1GB
rlimit_cpu: 5
rlimit_fsize: 1048576
rlimit_nofile: 64
