# Minimal nsjail config for judge runs.
# Set uid/gid to match the "judge" user on the VM.

mode: ONCE
hostname: "judge"
log_level: ERROR

# Run as root inside the namespace, mapped to an unprivileged range outside.
# The outside_id range must match /etc/subuid and /etc/subgid for the judge user.
uidmap { inside_id: "0" outside_id: "100000" count: 65536 }
gidmap { inside_id: "0" outside_id: "100000" count: 65536 }

# Mounts: provide read-only root, writable tmp
mount {
  src: "/"
  dst: "/"
  is_bind: true
  rw: false
}

mount {
  src: "/tmp"
  dst: "/tmp"
  is_bind: true
  rw: true
}

# Resource limits (MB / seconds)
rlimit_as: 1024
rlimit_cpu: 12
rlimit_fsize: 1
rlimit_nofile: 64
